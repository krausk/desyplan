# Environment configuration for desyplan relay controller

# Available environments: production, test
active_environment: test

environments:
  production:
    description: "Full system with 6 Arduino Mega 2560s controlling 576 relays"
    hardware:
      controller_type: "Arduino Mega 2560"
      num_slaves: 6
      leds_per_slave: 96
      total_leds: 576
      serial_ports: ["/dev/ttyUSB0", "/dev/ttyUSB1", "/dev/ttyUSB2", "/dev/ttyUSB3", "/dev/ttyUSB4", "/dev/ttyUSB5"]
      serial_baudrate: 115200
    timing:
      min_relay_delay: 0.05  # 50ms minimum delay between state changes (software)
      min_toggle_interval_ms: 20  # 20ms minimum per relay (firmware)
    firmware:
      source: "firmware/SlaveController/SlaveController.ino"
      board: "arduino:avr:mega"
      pins: "auto"  # Uses firmware's default pin mapping

  test:
    description: "Test setup with 1 Arduino UNO controlling 3 LEDs"
    hardware:
      controller_type: "Arduino UNO"
      num_slaves: 1
      leds_per_slave: 3
      total_leds: 3
      serial_ports: ["/dev/ttyACM0"]
      serial_baudrate: 115200
      # Explicit pin mapping for test LEDs
      pin_mapping:
        0: 13  # Built-in LED
        1: 12
        2: 11
    timing:
      min_relay_delay: 0.1  # 100ms for visible LED changes
      min_toggle_interval_ms: 10  # LEDs can switch faster than relays
    firmware:
      source: "firmware/TestController/TestController.ino"
      board: "arduino:avr:uno"
      pins: [13, 12, 11]

  testtwo:
    description: "Test setup with 1 Arduino UNO and 1 Arduino MEGA controlling each 3 LEDs"
    hardware:
      controller_type: "Arduino"
      num_slaves: 1
      leds_per_slave: 3
      total_leds: 6
      serial_ports: ["/dev/ttyACM0", "/dev/ttyACM1"]
      serial_baudrate: 115200
      # Explicit pin mapping for test LEDs
      pin_mapping:
        0: 13  # Built-in LED
        1: 12
        2: 11
    timing:
      min_relay_delay: 0.1  # 100ms for visible LED changes
      min_toggle_interval_ms: 10  # LEDs can switch faster than relays
    firmware:
      source: "firmware/TestController/TestController.ino"
      board: "arduino:avr:uno"
      pins: [13, 12, 11]